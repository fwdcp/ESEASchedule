<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/core-label/core-label.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-input/paper-input-decorator.html">

<polymer-element name="eseaschedule-matches" attributes="matches">
    <template>
        <link rel="stylesheet" href="../bower_components/materialize/dist/css/materialize.min.css">

        <div class="row">
            <div class="col s12">
                <template repeat="{{match in matches}}">
                    <div class="{{ {'card': true, 'amber': match.state == 'pending', 'light-blue': match.state == 'upcoming', 'light-green': match.state == 'live', 'teal': match.state == 'completed' && match.outcome_type == 'normal', 'pink': match.state == 'completed' && match.outcome_type == 'forfeit'} | tokenList}}">
                        <div class="card-content">
                            <span class="card-title">
                                <core-icon src="/img/esea_games/{{match.game_icon}}"></core-icon>&nbsp;
                                S{{match.season}} {{match.game_abbr}} {{match.region_abbr}} {{match.division_level | capitalizeFirstLetter}} {{match | matchStatus}}: #{{match.team_1_rank}} {{match.team_1_name}} vs. #{{match.team_2_rank}} {{match.team_2_name}}
                            </span>
                            <p>
                                <strong>Status:</strong> {{match.state | capitalizeFirstLetter}}
                                <template if="{{match.period}}">
                                    &nbsp;({{match.period}})
                                </template>
                            </p>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </template>

    <script>
        Polymer({
            "capitalizeFirstLetter": function(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            },
            "matchStatus": function(match) {
                if (match.type == "regular season") {
                    return "Week " + match.week;
                }
                else if (match.type == "post-season") {
                    return "Playoffs R" + match.round;
                }
            }
        });
    </script>
</polymer-element>
